<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>Performance Testing Package for Unity Test Framework | Inventory System </title>
      <meta name="viewport" content="width=device-width">
      <meta name="title" content="Performance Testing Package for Unity Test Framework | Inventory System ">
    
    
      <link rel="shortcut icon" href="../../../../favicon.ico">
      <link rel="stylesheet" href="../../../../styles/docfx.vendor.min.css">
      <link rel="stylesheet" href="../../../../styles/docfx.css">
      <link rel="stylesheet" href="../../../../styles/main.css">
      <meta property="docfx:navrel" content="../../../../toc.html">
      <meta property="docfx:tocrel" content="../../../../toc.html">
    
    <meta property="docfx:rel" content="../../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../logo.svg" alt="Inventory System">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first=First data-prev=Previous data-next=Next data-last=Last></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="performance-testing-package-for-unity-test-framework">Performance Testing Package for Unity Test Framework</h1>

<p>The Unity Performance Testing Package extends Unity Test Framework with performance testing capabilities. It provides an API and test case decorators for taking measurements/samples of Unity profiler markers, and other custom metrics, in the Unity Editor and built players. It also collects configuration metadata that is useful for comparing data across different hardware and configurations, such as build and player settings.</p>
<p>The Performance Testing Package is intended for use with the Unity Test Framework. You should be familiar with how to create and run tests as described in the <a href="https://docs.unity3d.com/Packages/com.unity.test-framework@latest">Unity Test Framework documentation</a>.</p>
<blockquote>
<p><strong>Note:</strong> When tests are run with Unity Test Framework, a development player is always built to support communication between the editor and player, effectively overriding the development build setting from the build settings UI or scripting API.</p>
</blockquote>
<h2 id="installing-the-performance-testing-package">Installing the Performance Testing Package</h2>
<p>Install the Performance Testing Package package using one of the following methods:</p>
<ul>
<li>Add the package by <a href="https://docs.unity3d.com/Manual/upm-ui-giturl.html">installing from a Git URL</a>.</li>
<li>Add the package as a dependency to the <a href="https://docs.unity3d.com/Manual/upm-manifestPrj.html">project manifest</a>.</li>
</ul>
<p>Example:</p>
<ol>
<li>Open the <code>manifest.json</code> file for your Unity project (located in the YourProject/Packages directory) in a text editor.</li>
<li>Add <code>&quot;com.unity.test-framework.performance&quot;: &quot;3.0.3&quot;,</code> to the dependencies.</li>
<li>Save the manifest.json file.</li>
<li>Verify the Performance Testing Package is now installed by opening the Unity Package Manager window.</li>
</ol>
<p>When the package is installed, add a reference to <code>Unity.PerformanceTesting</code> in your assembly definition to access the performance testing APIs.</p>
<p><img src="images/example04.png" alt="Performance test example01"></p>
<h2 id="unity-version-compatibility">Unity version compatibility</h2>
<p>Unity releases can often include changes that break compatibility with the Performance Testing Package, so we cannot currently guarantee latest package version compatability with every Unity version. The table below shows which version of the package is compatible with which Unity release streams.</p>
<table>
<thead>
<tr>
<th>Unity stream</th>
<th>Package version</th>
</tr>
</thead>
<tbody>
<tr>
<td>2023.2</td>
<td>3.0.3</td>
</tr>
<tr>
<td>2023.1</td>
<td>3.0.3</td>
</tr>
<tr>
<td>2022.2</td>
<td>3.0.3</td>
</tr>
<tr>
<td>2022.1</td>
<td>3.0.3</td>
</tr>
<tr>
<td>2021.3</td>
<td>3.0.3</td>
</tr>
<tr>
<td>2020.3</td>
<td>3.0.3</td>
</tr>
<tr>
<td>2019.4</td>
<td>2.8.1-preview</td>
</tr>
</tbody>
</table>
<h2 id="tips">Tips</h2>
<h3 id="project-settings">Project settings</h3>
<ul>
<li>Remove all but one of the <a href="https://docs.unity3d.com/Manual/class-QualitySettings.html">Quality level settings</a> in <strong>Project Settings &gt; Quality</strong>. Otherwise, you may have different configurations when running on different platforms. If you require different settings per platform then make sure they are being set as expected.</li>
<li>Disable VSync under <strong>Project Settings &gt; Quality</strong>. Some platforms like Android have a forced VSync and this will not be possible.</li>
<li>Disable HW Reporting <strong>PlayerSettings -&gt; Other -&gt; Disable HW Reporting</strong>.</li>
<li>Remove camera and run in batchmode if you are not measuring rendering.</li>
</ul>
<h3 id="generating-assets">Generating assets</h3>
<p>Use <a href="https://docs.unity3d.com/Packages/com.unity.test-framework@1.1/api/UnityEngine.TestTools.IPrebuildSetup.html">IPrebuildSetup</a> attribute when you need to generate assets.
Place assets in Resources or <a href="https://docs.unity3d.com/Manual/SpecialFolders.html">StreamingAssets</a> folders, scenes can be placed anywhere in the project, but should be added to build settings.</p>
<h4 id="example-1-iprebuildsetup-implementation">Example 1: IPrebuildSetup implementation</h4>
<pre><code class="lang-csharp">public class TestsWithPrebuildStep : IPrebuildSetup
{
    public void Setup()
    {
        // this code is executed before entering playmode or the player is executed
    }
}

public class MyAmazingPerformanceTest
{
    [Test, Performance]
    [PrebuildSetup(typeof(TestsWithPrebuildStep))]
    public void Test()
    {
        ...
    }
}
</code></pre>
<p>When loading scenes in IPrebuildSetup you have to use <code>LoadSceneMode.Additive</code>.</p>
<h4 id="example-2-using-editorscenemanager-to-create-new-scenes-additively-save-and-add-them-to-build-settings">Example 2: Using EditorSceneManager to create new scenes additively, save and add them to build settings.</h4>
<pre><code class="lang-csharp">private static string m_ArtifactsPath = &quot;Assets/Artifacts/&quot;;

public static Scene NewScene(NewSceneSetup setup)
{
    Scene scene = EditorSceneManager.NewScene(setup, NewSceneMode.Additive);
    EditorSceneManager.SetActiveScene(scene);
    return scene;
}

public static void SaveScene(Scene scene, string name, bool closeScene = true)
{
    EditorSceneManager.SaveScene(scene, GetScenePath(name));

    if (closeScene)
    {
        foreach (var sceneSetting in EditorBuildSettings.scenes)
            if (sceneSetting.path == GetScenePath((name)))
                return;

        EditorSceneManager.CloseScene(scene, true);
        EditorSceneManager.SetActiveScene(EditorSceneManager.GetSceneAt(0));

        var newListOfScenes = new List&lt;EditorBuildSettingsScene&gt;();
        newListOfScenes.Add(new EditorBuildSettingsScene(GetScenePath(name), true));
        newListOfScenes.AddRange(EditorBuildSettings.scenes);
        EditorBuildSettings.scenes = newListOfScenes.ToArray();
    }
}

public static string GetScenePath(string name)
{
    return m_ArtifactsPath + name + &quot;.unity&quot;;
}
</code></pre>

</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In this article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      
      <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="../../../../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
