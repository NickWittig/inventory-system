<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Forest Stream Construction Tutorial | Inventory System </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Forest Stream Construction Tutorial | Inventory System ">
      
      
      <link rel="icon" href="../../../../favicon.ico">
      <link rel="stylesheet" href="../../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../../public/main.css">
      <meta name="docfx:navrel" content="../../../../toc.html">
      <meta name="docfx:tocrel" content="../../../../toc.html">
      
      <meta name="docfx:rel" content="../../../../">
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../../index.html">
            <img id="logo" class="svg" src="../../../../logo.svg" alt="Inventory System">
            Inventory System
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="forest-stream-construction-tutorial">Forest Stream Construction Tutorial</h1>

<p>This tutorial shows you, step by step, how to use the assets included in this sample to construct a forest stream environment.</p>
<ol>
<li><a href="#step-1">Sculpt Terrain</a></li>
<li><a href="#step-2">Paint Terrain Materials</a></li>
<li><a href="#step-3">Add Water Planes</a></li>
<li><a href="#step-4">Add Waterfall Meshes</a></li>
<li><a href="#step-5">Add Rocks</a></li>
<li><a href="#step-6">Add Water Decals</a></li>
<li><a href="#step-7">Add Reflection Probes</a></li>
<li><a href="#step-8">Add Terrain Detail Meshes</a>
<a href="#additional-ideas">Additional Ideas</a></li>
</ol>
<h2 id="step-1---sculpt-terrain"><a name="step-1">Step 1 - Sculpt Terrain</a></h2>
<ol>
<li><p>Start by blocking out the main shapes of the terrain. Use the <strong>Set Height</strong> brush to create a sloping terrain by creating a series of terraces and then use the <strong>Smooth</strong> brush to smooth out the hard edges between the terraces.</p>
</li>
<li><p>Cut in the stream channel with the <strong>Set Height</strong> brush in several different tiers heading down the slope. After you cut in the stream, smooth out the hard edges with the <strong>Smooth</strong> brush.</p>
</li>
<li><p>Add polish to finalize the terrain shape. Use the <strong>Raise/Lower Height</strong> brush and the <strong>Smooth</strong> brush to add touch-ups and variety.  In this process, start out with large brushes and end with the small ones.</p>
</li>
</ol>
<p>When this step is done, you can revisit the terrain shape occasionally to add additional touch ups, especially after adding in the water meshes in steps 3 and 4, to ensure that the water meshes and terrain shape work together.</p>
<h2 id="step-2---paint-terrain-materials"><a name="step-2">Step 2 - Paint Terrain Materials</a></h2>
<p>Next, it’s time to add materials to our terrain.  We have four material layers - cobblestone rocks for our stream bed, dry dirt, rocky moss, and mossy grass. To apply the materials, we begin by establishing guidelines.  The stones material goes in the stream bed.  The dirt material goes along the banks of the stream. As a transition between the first and the grass, we use the rocky moss material. And finally, we use the grass material for the background.</p>
<ol>
<li>First block in the materials according to the guidelines with large, hard-edged brushes.</li>
<li>Then we go back and blend the materials together using smaller brushes. Paint one material over the other using brushes with a low opacity value to blend the two materials together.</li>
</ol>
<p>Even though our terrain materials exhibit tiling artifacts by themselves, we’re able to hide the tiling by giving each material a different tiling frequency. When the materials are blended, they break up each others tiling artifacts.  We also cover the terrain with detail meshes (step 7) which further hides the tiling.</p>
<h2 id="step-3---add-water-planes"><a name="step-3">Step 3 - Add Water Planes</a></h2>
<p>The stream itself is constructed from simple planes that are added to the scene.</p>
<ol>
<li>Right-click in the Hierarchy panel and select <strong>3D Object</strong>&gt;<strong>Plane</strong>.</li>
<li>Then apply the WaterStream material.</li>
<li>Place the planes in the stream channel that’s cut into the terrain.</li>
<li>Scale the planes along the Z axis to stretch them along the length of the stream. Water flows in the local -Z direction of the planes. Planes are scaled as long as they need to be in order to reach from one stream height drop to the next.</li>
</ol>
<p>Notice that the edges of the stream mesh are transparent at the start and at the end.  This is to allow the stream meshes to blend together correctly with the waterfall meshes that link the stream planes together.</p>
<h2 id="step-4---add-waterfall-meshes"><a name="step-4">Step 4 - Add Waterfall Meshes</a></h2>
<p>The waterfall meshes are designed to connect one level of stream plane to the next lower level.</p>
<ol>
<li>Place the waterfall meshes at the end of a stream plane. They slope down to connect to the next stream plane.</li>
<li>Rotate the waterfall meshes around the Y axis to align the waterfall mesh between the two stream planes.</li>
<li>Scale the waterfall mesh on the Y axis so that the bottom portion of the waterfall mesh aligns with the lower stream plane. The pivot point of the waterfall is lined up vertically with the top portion of the waterfall, so you can place the waterfall mesh at the exact same height as the top stream plane, and then scale to meet the lower stream plane.</li>
</ol>
<p>Notice that the Sorting Priority parameter in the Advanced Options of the material has been set to -1.  This makes the waterfall meshes draw behind the stream meshes so there isn’t a draw order conflict.</p>
<h2 id="step-5---add-rocks"><a name="step-5">Step 5 - Add Rocks</a></h2>
<p>Streams are often filled with rocks that have been pushed by the current. To save memory and reduce draw calls, we’re just using two different rock meshes that both use the same texture set.</p>
<ol>
<li>Place rocks at random intervals along the length of the stream.</li>
<li>Rotate and scale the rocks to give a variety of appearances.</li>
</ol>
<p>Notice that we’ve created visual variety by creating two different sizes of rocks - large boulders, and smaller rocks. Overall, the rocks break up the shape of the stream and change the pattern of the foam on the water surface.</p>
<h2 id="step-6---add-water-decals"><a name="step-6">Step 6 - Add Water Decals</a></h2>
<p>We use the Water Wetness and Water Caustics decal to more tightly integrate the stream water with the terrain and rocks. The Wetness decal makes the terrain and other meshes around the stream look like they’re wet, and the Caustics decal imitates the appearance of lighting getting refracted by the surface of the water and getting focused in animated patterns on the bottom of the stream.</p>
<ol>
<li>Create and scale the Wetness decals so that the top of the decal extends around half a meter above the surface of the water. The top of the Caustics decal should be just under the water.</li>
<li>Create and scale the caustics decals so that the caustic patterns are only projected under the water planes.</li>
</ol>
<p>For both decals, the decal volumes should be kept as small as possible in all three dimensions - just large enough to cover their intended use and no larger. You can also save some performance by lowering the Draw Distance parameter on each decal so they are not drawn at a distance.</p>
<h2 id="step-7---add-reflection-probes"><a name="step-7">Step 7 - Add Reflection Probes</a></h2>
<p>Reflections are a critical component of realistic-looking water.</p>
<ol>
<li>To improve the appearance of the water reflections, create a Reflection Probe for each of the stream segments and place it at about head height and in the middle of the stream. If there are objects like rocks and trees nearby, they will be captured in the Reflection Probes and then reflected more accurately in the water.</li>
</ol>
<p>Especially notice how water to the right of this point correctly reflects the high bank behind the signs while water to the left only reflects the sky. The Reflection Probes contribute this additional realism.</p>
<h2 id="step-8---add-terrain-detail-meshes"><a name="step-8">Step 8 - Add Terrain Detail Meshes</a></h2>
<p>Our last step is to add detail meshes to the terrain.</p>
<ol>
<li>Add pebble meshes everywhere, including under the water.</li>
<li>Add broad-leaf nettle plants around the edges of the water in the dirt areas.</li>
<li>Add ferns (3 variations) just above the nettle in the transition between dirt and grass.</li>
<li>Add clover in between the ferns and the grass.</li>
<li>For the grass, add the three different meshes. Each of them fade out at a different distance from the camera to soften the fade-out so that it doesn’t happen all at once. The most dense grass is only visible at 10 meters from the camera to improve performance. Paint the three different grass layers somewhat randomly with all three layers being applied where the terrain grass material is most dense and the most sparse grass being painted around the edges. Each grass mesh also has slightly different wind direction and intensity values in the material to give variety to the grass appearance. Only one of the three grass meshes has shadows turned on - which gives the impression of grass shadows without paying the full performance cost.</li>
</ol>
<p>To save on performance, our terrain is set to fade out the detail meshes at 30 meters. This allows us to achieve a nice density of meshes up close and then get rid of them further away where they’re not as visible.  We hide the transition by dither fading the meshes in the shader before the 30 meter point so there’s no popping.</p>
<h2 id="additional-ideas"><a name="additional-ideas">Additional Ideas</a></h2>
<p>We have a pretty nice looking environment here, but there’s a lot more that could be done. You could complete this environment by adding your own trees, stumps and fallen logs.</p>

</article>

        <div class="contribution d-print-none">
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
